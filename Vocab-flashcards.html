<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vocabulary Flashcards — Demo</title>
  <style>
    :root{--bg:#f7f8fb;--card:#ffffff;--accent:#4f46e5;--muted:#6b7280}
    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{margin:0;background:linear-gradient(180deg,#eef2ff 0%,var(--bg) 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .app{width:960px;max-width:100%;background:transparent}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0;color:#111827}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    button{background:var(--card);border:1px solid #e6e9f2;padding:8px 12px;border-radius:8px;cursor:pointer}
    button.primary{background:var(--accent);color:#fff;border:0}
    .card-wrap{display:grid;grid-template-columns:1fr 320px;gap:18px}
    .card{background:var(--card);padding:28px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.08);min-height:220px;display:flex;align-items:center;justify-content:center;flex-direction:column}
    .word{font-size:36px;font-weight:700;color:#0f172a}
    .translation{margin-top:16px;font-size:20px;color:var(--muted);min-height:28px}
    .meta{font-size:13px;color:var(--muted);margin-top:10px}
    .side{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.04)}
    .list{max-height:360px;overflow:auto;margin-top:8px}
    .list .item{display:flex;justify-content:space-between;padding:8px;border-radius:8px;margin-bottom:6px;background:#fbfbfe;border:1px solid #f0f2ff}
    label{display:block;font-size:13px;color:#374151;margin-top:8px}
    input[type=text]{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9f2;margin-top:6px}
    .actions{display:flex;gap:8px;margin-top:10px}
    footer{margin-top:18px;color:var(--muted);font-size:13px}
    @media (max-width:880px){.card-wrap{grid-template-columns:1fr;}.side{order:-1}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Vocabulary Flashcards — Demo</h1>
      <div class="controls">
        <button id="prevBtn">◀ Prev</button>
        <button id="showBtn" class="primary">Show translation</button>
        <button id="nextBtn">Next ▶</button>
        <button id="shuffleBtn">Shuffle</button>
      </div>
    </header>

    <div class="card-wrap">
      <main class="card" role="main">
        <div class="word" id="wordText">Loading...</div>
        <div class="translation" id="translationText"></div>
        <div class="meta" id="progressText">0 / 0</div>
      </main>

      <aside class="side">
        <div>
          <strong>Manage cards</strong>
          <label for="termInput">Word</label>
          <input id="termInput" type="text" placeholder="e.g. apple" />
          <label for="transInput">Translation</label>
          <input id="transInput" type="text" placeholder="e.g. manzana" />
          <div class="actions">
            <button id="addBtn">Add</button>
            <button id="importBtn">Import (JSON)</button>
            <button id="exportBtn">Export</button>
          </div>

          <div style="margin-top:12px">
            <strong>Cards</strong>
            <div class="list" id="cardsList"></div>
          </div>
        </div>
      </aside>
    </div>

    <footer>
      Tip: open the console (F12) to see the card array. You can also import a JSON array of cards.
    </footer>
  </div>

  <script>
    // Sample vocabulary (you can replace or import JSON)
    let cards = [
      {term: 'apple', translation: 'manzana'},
      {term: 'house', translation: 'casa'},
      {term: 'dog', translation: 'perro'},
      {term: 'book', translation: 'libro'},
      {term: 'water', translation: 'agua'}
    ];

    // state
    let index = 0;
    let showTranslation = false;

    // elements
    const wordText = document.getElementById('wordText');
    const translationText = document.getElementById('translationText');
    const progressText = document.getElementById('progressText');
    const showBtn = document.getElementById('showBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const addBtn = document.getElementById('addBtn');
    const termInput = document.getElementById('termInput');
    const transInput = document.getElementById('transInput');
    const cardsList = document.getElementById('cardsList');
    const importBtn = document.getElementById('importBtn');
    const exportBtn = document.getElementById('exportBtn');

    function render() {
      if (cards.length === 0) {
        wordText.textContent = 'No cards yet';
        translationText.textContent = '';
        progressText.textContent = '0 / 0';
        cardsList.innerHTML = '';
        return;
      }
      const card = cards[index];
      wordText.textContent = card.term;
      translationText.textContent = showTranslation ? card.translation : '';
      progressText.textContent = `${index + 1} / ${cards.length}`;
      renderList();
    }

    function renderList() {
      cardsList.innerHTML = '';
      cards.forEach((c, i) => {
        const el = document.createElement('div');
        el.className = 'item';
        el.innerHTML = `<div><strong>${escapeHtml(c.term)}</strong><div style="font-size:12px;color:#6b7280">${escapeHtml(c.translation)}</div></div><div style="display:flex;gap:6px"><button data-i="${i}" class="goBtn">Go</button><button data-i="${i}" class="delBtn">Del</button></div>`;
        cardsList.appendChild(el);
      });
      // attach events
      document.querySelectorAll('.goBtn').forEach(b => b.addEventListener('click', e => { index = Number(e.target.dataset.i); showTranslation=false; render(); }));
      document.querySelectorAll('.delBtn').forEach(b => b.addEventListener('click', e => { const i=Number(e.target.dataset.i); cards.splice(i,1); if(index>=cards.length) index = Math.max(0,cards.length-1); render(); }));
    }

    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }

    showBtn.addEventListener('click', () => {
      showTranslation = !showTranslation;
      showBtn.textContent = showTranslation ? 'Hide translation' : 'Show translation';
      render();
    });

    prevBtn.addEventListener('click', () => {
      if(cards.length===0) return;
      index = (index - 1 + cards.length) % cards.length;
      showTranslation = false;
      render();
    });

    nextBtn.addEventListener('click', () => {
      if(cards.length===0) return;
      index = (index + 1) % cards.length;
      showTranslation = false;
      render();
    });

    shuffleBtn.addEventListener('click', () => {
      shuffle(cards);
      index = 0; showTranslation = false; render();
    });

    addBtn.addEventListener('click', () => {
      const t = termInput.value.trim();
      const tr = transInput.value.trim();
      if(!t || !tr) { alert('Please enter both word and translation'); return; }
      cards.push({term:t,translation:tr});
      termInput.value=''; transInput.value=''; index = cards.length-1; showTranslation=false; render();
    });

    importBtn.addEventListener('click', () => {
      const json = prompt('Paste a JSON array of cards. Example: [{"term":"cat","translation":"gato"}]');
      if(!json) return;
      try{
        const parsed = JSON.parse(json);
        if(Array.isArray(parsed)){
          cards = parsed.map(c => ({term:c.term||'', translation:c.translation||''})).filter(c=>c.term);
          index=0; showTranslation=false; render();
        } else alert('JSON must be an array');
      }catch(e){ alert('Invalid JSON'); }
    });

    exportBtn.addEventListener('click', () => {
      const data = JSON.stringify(cards, null, 2);
      const blob = new Blob([data], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'flashcards.json'; document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    // helpers
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // initial render
    render();

    // expose to console for quick demo editing
    window.flashcards = {cards, render};
  </script>
</body>
</html>
